
haproxy:
  image: haproxy:1.5.14
  volumes:
  - "./haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg:ro"
  ports:
  - "8080:8080"
  - "8081:8081"
  links:
  - headless1
  - headless2
  - headless3
  - headless4
  - headless5
  command: "/usr/local/sbin/haproxy -V -f /usr/local/etc/haproxy/haproxy.cfg"



headless1:
  image: cmfatih/phantomjs:1.9.7 # topher515/headless-cameraman
  volumes:
  - "./serve.js:/opt/serve.js:ro"
  ports:
  - "80"
  command: "/usr/bin/phantomjs /opt/serve.js"

headless2:
  image: cmfatih/phantomjs:1.9.7 # topher515/headless-cameraman
  volumes:
  - "./serve.js:/opt/serve.js:ro"
  ports:
  - "80"
  command: "/usr/bin/phantomjs /opt/serve.js"

headless3:
  image: cmfatih/phantomjs:1.9.7 # topher515/headless-cameraman
  volumes:
  - "./serve.js:/opt/serve.js:ro"
  ports:
  - "80"
  command: "/usr/bin/phantomjs /opt/serve.js"

headless4:
  image: cmfatih/phantomjs:1.9.7 # topher515/headless-cameraman
  volumes:
  - "./serve.js:/opt/serve.js:ro"
  ports:
  - "80"
  command: "/usr/bin/phantomjs /opt/serve.js"

headless5:
  image: cmfatih/phantomjs:1.9.7 # topher515/headless-cameraman
  volumes:
  - "./serve.js:/opt/serve.js:ro"
  ports:
  - "80"
  command: "/usr/bin/phantomjs /opt/serve.js"